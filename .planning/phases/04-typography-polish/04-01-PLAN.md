---
phase: 04-typography-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
autonomous: true

must_haves:
  truths:
    - "Scrollbar matches dark theme (not default light browser scrollbar)"
    - "Selected text has blue-tinted highlight instead of default OS color"
    - "Contrast ratios are documented in code for future reference"
  artifacts:
    - path: "app/globals.css"
      provides: "Scrollbar tokens and styling"
      contains: "scrollbar-color"
    - path: "app/globals.css"
      provides: "Selection styling"
      contains: "::selection"
    - path: "app/globals.css"
      provides: "Contrast documentation"
      contains: "CONTRAST RATIOS"
  key_links:
    - from: "scrollbar styling"
      to: "--scrollbar-thumb token"
      via: "CSS custom property"
      pattern: "var\\(--scrollbar"
    - from: "::selection"
      to: "--text-primary"
      via: "color property"
      pattern: "::selection.*--text-primary"
---

<objective>
Add dark theme scrollbar styling and text selection highlighting to complete the polish layer.

Purpose: Meet remaining accessibility requirements (A11Y-03 documentation, COMP-04 scrollbar) and add themed selection colors for cohesive dark theme experience.

Output: Extended globals.css with scrollbar tokens, scrollbar CSS (standard + WebKit), selection styling, and contrast ratio documentation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-typography-polish/04-RESEARCH.md
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add scrollbar tokens and styling</name>
  <files>app/globals.css</files>
  <action>
Add scrollbar tokens to the :root block (after glow tokens, before legacy tokens):

```css
/* Scrollbar */
--scrollbar-thumb: #94a3b8;
--scrollbar-thumb-hover: #cbd5e1;
--scrollbar-track: #0f172a;
```

Add scrollbar styling section AFTER the inline link styles at the end of the file:

```css
/* =========================
   SCROLLBAR STYLING
   Dark theme scrollbar for cohesive appearance
   Standard CSS properties (Firefox, Chrome 121+)
   ========================= */
html {
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/* =========================
   WEBKIT SCROLLBAR FALLBACK
   Chrome, Safari, Edge (detailed styling)
   ========================= */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
  background-color: var(--scrollbar-thumb);
  border-radius: 4px;
  border: 2px solid var(--scrollbar-track);
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--scrollbar-thumb-hover);
}

::-webkit-scrollbar-corner {
  background: var(--scrollbar-track);
}
```

Use `thin` scrollbar-width for minimal aesthetic that matches dark theme.
Use #94a3b8 (neutral-400) for thumb - matches muted text for subtle appearance.
Use #0f172a (surface-elevated) for track - blends with site background.
  </action>
  <verify>
1. Run `npm run dev` and view site in browser
2. Scroll the page - scrollbar should be thin with dark track and gray thumb
3. Hover over scrollbar thumb - should lighten slightly
4. Test in Chrome/Edge (WebKit) and Firefox (standard) if available
  </verify>
  <done>Page scrollbar displays dark theme colors (gray thumb on dark track) instead of default light browser scrollbar</done>
</task>

<task type="auto">
  <name>Task 2: Add text selection styling</name>
  <files>app/globals.css</files>
  <action>
Add selection styling section AFTER the scrollbar styling:

```css
/* =========================
   TEXT SELECTION STYLING
   Themed highlight for selected text
   Uses accent blue at 30% opacity for readability
   ========================= */
::selection {
  background-color: rgba(59, 130, 246, 0.3);
  color: var(--text-primary);
}
```

Use 30% opacity for background - visible but doesn't obscure text.
Use accent-primary blue (#3b82f6) to match link and interactive element colors.
Always set both background-color AND color for proper contrast.
  </action>
  <verify>
1. Select text on any page (heading, body text, code block)
2. Selection background should be blue-tinted (not default OS blue/purple)
3. Selected text should remain white and readable
4. Test on different elements: headings, paragraphs, code blocks
  </verify>
  <done>Selected text displays with blue-tinted highlight (30% opacity) and white text, matching the site's accent color scheme</done>
</task>

<task type="auto">
  <name>Task 3: Document contrast ratios</name>
  <files>app/globals.css</files>
  <action>
Add contrast documentation comment block in the :root section, after the Text tokens and before the Accents tokens:

```css
/* Text */
--text-primary: var(--color-neutral-100);
--text-secondary: var(--color-neutral-300);
--text-muted: var(--color-neutral-400);

/* CONTRAST RATIOS (verified 2026-01-17)
   Against --surface-base (#0a0e27):
   - --text-primary (#f1f5f9): 17:1  [WCAG AAA]
   - --text-secondary (#cbd5e1): 12:1  [WCAG AAA]
   - --text-muted (#94a3b8): 8.3:1  [WCAG AAA]
   - --accent-primary (#3b82f6): 5.6:1  [WCAG AA]

   All text passes WCAG AA (4.5:1 minimum).
   Tool: WebAIM Contrast Checker */

/* Accents */
```

This documents that A11Y-03 (contrast verification) has been completed.
All existing colors already pass - no changes needed, just verification.
Include tool used and date for future reference.
  </action>
  <verify>
1. Read globals.css and confirm contrast comment block exists
2. Comment should list all text tokens with their contrast ratios
3. All ratios should show PASS for WCAG AA (4.5:1 minimum)
  </verify>
  <done>Contrast ratios are documented in globals.css with verification date, tool used, and WCAG compliance level for each text token</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Visual check - scrollbar:**
   - Navigate to a long page (e.g., About or Project detail)
   - Scrollbar should be dark themed (not light)
   - Thumb should be gray, track should be near-black
   - Hover state should lighten the thumb

2. **Visual check - selection:**
   - Select text anywhere on the site
   - Highlight should be blue-tinted (not default OS color)
   - Text should remain readable while selected

3. **Code check - contrast documentation:**
   - Open globals.css
   - Find contrast ratio comment block
   - Verify it documents all text tokens with WCAG compliance

4. **Cross-browser (if available):**
   - Scrollbar works in Chrome, Firefox, Safari, Edge
   - Selection works in all browsers
</verification>

<success_criteria>
- Scrollbar matches dark theme (thin gray thumb on dark track)
- Text selection uses themed blue highlight at 30% opacity
- Contrast ratios documented in globals.css
- A11Y-03 requirement: verified and documented
- COMP-04 requirement: scrollbar styling complete
</success_criteria>

<output>
After completion, create `.planning/phases/04-typography-polish/04-01-SUMMARY.md`
</output>
