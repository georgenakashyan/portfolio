---
phase: 02-surface-styling
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
  - tailwind.config.ts
autonomous: true

must_haves:
  truths:
    - "Shadow tokens exist for raised and overlay elevation levels"
    - "Surface tokens include sunken and overlay levels"
    - "Tailwind utilities are available for all new tokens"
  artifacts:
    - path: "app/globals.css"
      provides: "Shadow and surface token definitions"
      contains: "--shadow-raised"
    - path: "tailwind.config.ts"
      provides: "Tailwind boxShadow and surface utilities"
      contains: "boxShadow"
  key_links:
    - from: "tailwind.config.ts"
      to: "app/globals.css"
      via: "CSS variable references"
      pattern: "var\\(--shadow"
---

<objective>
Extend token system with shadow and surface elevation tokens for dark theme depth hierarchy.

Purpose: Establish the foundation for 4-level elevation system (sunken < base < raised < overlay) that all components will use. Dark themes require lighter surfaces AND subtle shadows with theme-aware colors for proper depth perception.

Output: Shadow tokens (--shadow-raised, --shadow-overlay) and extended surface tokens (--surface-sunken, --surface-overlay) in globals.css, with corresponding Tailwind utilities.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-surface-styling/02-RESEARCH.md
@app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add shadow and surface tokens to globals.css</name>
  <files>app/globals.css</files>
  <action>
Add the following tokens to the LAYER 2: SEMANTIC TOKENS section in globals.css, after the existing Surfaces section:

```css
/* Surface extensions (4-level elevation) */
--surface-sunken: var(--color-neutral-950);
--surface-overlay: #243548;

/* Shadows (dark theme optimized - layered for realism) */
--shadow-color: 220deg 40% 2%;
--shadow-raised:
  0px 1px 2px hsl(var(--shadow-color) / 0.3),
  0px 2px 4px hsl(var(--shadow-color) / 0.3);
--shadow-overlay:
  0px 2px 4px hsl(var(--shadow-color) / 0.4),
  0px 4px 8px hsl(var(--shadow-color) / 0.3),
  0px 8px 16px hsl(var(--shadow-color) / 0.2);
```

Place --surface-sunken and --surface-overlay right after --surface-raised.
Place shadow tokens after the Borders section but before Legacy tokens.

Why these values:
- sunken uses neutral-950 (darkest) for inset/well areas
- overlay is slightly lighter than raised (#243548 vs #1e293b) for modals/dropdowns
- shadow-color uses HSL with 220deg hue matching the theme blue undertone
- Multi-layer shadows create more realistic depth (Josh Comeau technique)
  </action>
  <verify>
Grep globals.css for:
- `--surface-sunken`
- `--surface-overlay`
- `--shadow-raised`
- `--shadow-overlay`

All four tokens should exist in :root block.
  </verify>
  <done>globals.css contains 4 new tokens: surface-sunken, surface-overlay, shadow-raised, shadow-overlay</done>
</task>

<task type="auto">
  <name>Task 2: Add Tailwind utilities for new tokens</name>
  <files>tailwind.config.ts</files>
  <action>
Extend tailwind.config.ts:

1. Add sunken and overlay to the surface color object:
```typescript
surface: {
  base: "var(--surface-base)",
  elevated: "var(--surface-elevated)",
  raised: "var(--surface-raised)",
  sunken: "var(--surface-sunken)",    // NEW
  overlay: "var(--surface-overlay)",  // NEW
},
```

2. Add boxShadow extension after backgroundImage (inside theme.extend):
```typescript
boxShadow: {
  raised: "var(--shadow-raised)",
  overlay: "var(--shadow-overlay)",
},
```

This enables:
- `bg-surface-sunken`, `bg-surface-overlay`
- `shadow-raised`, `shadow-overlay`
  </action>
  <verify>
Run: `npx tailwind config --full 2>/dev/null | grep -A5 'boxShadow'`
Or manually verify tailwind.config.ts contains boxShadow with raised and overlay keys.
  </verify>
  <done>Tailwind config has surface.sunken, surface.overlay, and boxShadow.raised/overlay utilities</done>
</task>

<task type="auto">
  <name>Task 3: Verify token integration</name>
  <files></files>
  <action>
Run the development server and verify the tokens are working:

1. `npm run dev` (if not already running)
2. Create a quick test by temporarily adding to any visible component:
   - Check browser DevTools: In Elements panel, inspect :root and confirm new CSS variables are present
   - Or use browser console: `getComputedStyle(document.documentElement).getPropertyValue('--shadow-raised')`

This is a smoke test to confirm tokens are loading correctly.

Note: Do NOT commit any test changes - just verify visually and revert.
  </action>
  <verify>
Browser DevTools shows:
- --surface-sunken with value from neutral-950
- --surface-overlay with #243548
- --shadow-raised with multi-layer shadow value
- --shadow-overlay with multi-layer shadow value
  </verify>
  <done>All 4 new tokens are accessible in browser and have correct values</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `grep -E "(surface-sunken|surface-overlay|shadow-raised|shadow-overlay)" app/globals.css` returns 4 matches
2. `grep -E "(sunken|overlay)" tailwind.config.ts` returns matches for both surface and boxShadow
3. No TypeScript errors: `npx tsc --noEmit` passes
4. Dev server runs without errors
</verification>

<success_criteria>
1. Four new CSS custom properties exist in globals.css: --surface-sunken, --surface-overlay, --shadow-raised, --shadow-overlay
2. Tailwind utilities available: bg-surface-sunken, bg-surface-overlay, shadow-raised, shadow-overlay
3. No breaking changes to existing components (legacy tokens preserved)
4. Development server runs without errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-surface-styling/02-01-SUMMARY.md`
</output>
