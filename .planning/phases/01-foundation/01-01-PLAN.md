---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
  - tailwind.config.ts
autonomous: true

must_haves:
  truths:
    - "Color tokens follow three-layer architecture: primitive, semantic, utility"
    - "Semantic tokens reference primitive tokens, not raw hex values"
    - "Tailwind utilities reference semantic tokens from CSS custom properties"
    - "Existing styles continue to work during migration (legacy tokens preserved)"
  artifacts:
    - path: "app/globals.css"
      provides: "Primitive and semantic color tokens"
      contains: "--color-neutral-950"
    - path: "tailwind.config.ts"
      provides: "Tailwind theme extension with semantic token utilities"
      contains: "surface:"
  key_links:
    - from: "tailwind.config.ts"
      to: "app/globals.css"
      via: "var(--surface-base) references CSS custom property"
      pattern: "var\\(--surface"
---

<objective>
Implement three-layer semantic color token architecture in globals.css and tailwind.config.ts.

Purpose: Establish the foundational color system that all subsequent styling work depends on. This separates raw color values (primitive) from meaning (semantic) from usage (Tailwind utilities), enabling easier palette changes and consistent theming.

Output: Updated globals.css with Layer 1 (primitive) and Layer 2 (semantic) tokens. Updated tailwind.config.ts with Layer 3 (utility) mappings. Legacy tokens preserved for backward compatibility.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/research/ARCHITECTURE.md
@app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add primitive and semantic color tokens to globals.css</name>
  <files>app/globals.css</files>
  <action>
Refactor the :root block in globals.css to implement three-layer token architecture:

1. **Add Layer 1 - Primitive tokens** at the top of :root (BEFORE existing tokens):
   ```css
   /* =========================
      LAYER 1: PRIMITIVE TOKENS
      Raw color values - never use directly in components
      ========================= */
   --color-neutral-950: #0a0a0f;
   --color-neutral-900: #0a0e27;
   --color-neutral-800: #0f172a;
   --color-neutral-700: #1e293b;
   --color-neutral-400: #94a3b8;
   --color-neutral-300: #cbd5e1;
   --color-neutral-100: #f1f5f9;

   --color-primary-500: #3b82f6;
   --color-violet-500: #8b5cf6;
   --color-cyan-500: #06b6d4;
   --color-emerald-500: #10b981;
   --color-rose-500: #f43f5e;
   ```

2. **Add Layer 2 - Semantic tokens** after primitives:
   ```css
   /* =========================
      LAYER 2: SEMANTIC TOKENS
      Purpose-based mappings - use these in components
      ========================= */

   /* Surfaces */
   --surface-base: var(--color-neutral-900);
   --surface-elevated: var(--color-neutral-800);
   --surface-raised: var(--color-neutral-700);

   /* Text */
   --text-primary: var(--color-neutral-100);
   --text-secondary: var(--color-neutral-300);
   --text-muted: var(--color-neutral-400);

   /* Accents */
   --accent-primary: var(--color-primary-500);
   --accent-secondary: var(--color-violet-500);
   --accent-tertiary: var(--color-cyan-500);

   /* Status */
   --status-success: var(--color-emerald-500);
   --status-error: var(--color-rose-500);

   /* Gradients */
   --gradient-primary-from: var(--color-primary-500);
   --gradient-primary-to: var(--color-violet-500);
   --gradient-surface-from: var(--color-neutral-900);
   --gradient-surface-to: var(--color-neutral-800);

   /* Borders */
   --border-subtle: rgba(255, 255, 255, 0.05);
   --border-default: rgba(255, 255, 255, 0.1);
   --border-strong: rgba(255, 255, 255, 0.2);

   /* Focus (for accessibility) */
   --focus-ring-color: #ffffff;
   --focus-ring-offset: 2px;
   --focus-ring-width: 2px;
   --focus-shadow-color: rgba(0, 0, 0, 0.5);
   ```

3. **KEEP existing legacy tokens** at the end of :root with comments marking them as legacy:
   ```css
   /* =========================
      LEGACY TOKENS (keep during migration)
      Remove after all components migrated
      ========================= */
   --background-start: #0a0e27;
   --background-end: #0f172a;
   --primary-start: #3b82f6;
   --primary-end: #8b5cf6;
   --secondary: #06b6d4;
   /* Note: --text-primary and --text-secondary are now semantic tokens above */
   --card-bg: #1e293b;
   --success: #10b981;
   ```

Important: Do NOT remove any existing tokens. This is additive. All existing component styles must continue working.
  </action>
  <verify>
Run `npm run build` to verify no CSS parsing errors. The build should succeed. Existing styles should render identically (check dev server).
  </verify>
  <done>
globals.css contains Layer 1 (primitive) tokens with --color-* naming, Layer 2 (semantic) tokens with --surface-*, --text-*, --accent-* naming, and legacy tokens are preserved with comments. Build succeeds.
  </done>
</task>

<task type="auto">
  <name>Task 2: Extend tailwind.config.ts with semantic token utilities</name>
  <files>tailwind.config.ts</files>
  <action>
Update tailwind.config.ts to add Layer 3 semantic token utilities alongside existing legacy utilities:

1. **Add new semantic color utilities** to theme.extend.colors:
   ```typescript
   colors: {
     // NEW: Semantic surface colors
     surface: {
       base: "var(--surface-base)",
       elevated: "var(--surface-elevated)",
       raised: "var(--surface-raised)",
     },
     // NEW: Semantic content/text colors
     content: {
       primary: "var(--text-primary)",
       secondary: "var(--text-secondary)",
       muted: "var(--text-muted)",
     },
     // NEW: Semantic accent colors
     accent: {
       primary: "var(--accent-primary)",
       secondary: "var(--accent-secondary)",
       tertiary: "var(--accent-tertiary)",
     },
     // NEW: Status colors
     status: {
       success: "var(--status-success)",
       error: "var(--status-error)",
     },
     // NEW: Border colors
     border: {
       subtle: "var(--border-subtle)",
       DEFAULT: "var(--border-default)",
       strong: "var(--border-strong)",
     },

     // LEGACY: Keep existing tokens during migration
     "background-start": "var(--background-start)",
     "background-end": "var(--background-end)",
     "primary-start": "var(--primary-start)",
     "primary-end": "var(--primary-end)",
     secondary: "var(--secondary)",
     "text-primary": "var(--text-primary)",
     "text-secondary": "var(--text-secondary)",
     "card-bg": "var(--card-bg)",
     success: "var(--success)",
   },
   ```

2. **Update backgroundImage** to use semantic tokens:
   ```typescript
   backgroundImage: {
     // Use semantic gradient tokens
     "gradient-bg": "linear-gradient(to bottom right, var(--gradient-surface-from), var(--gradient-surface-to))",
     "gradient-primary": "linear-gradient(to right, var(--gradient-primary-from), var(--gradient-primary-to))",
   },
   ```

3. **Keep existing fontFamily** unchanged.

Important: Preserve all existing utilities. This is additive. Components using `bg-card-bg` or `text-text-primary` must continue working.
  </action>
  <verify>
Run `npm run build` to verify TypeScript compilation succeeds. In dev server, verify existing component styles (Navbar, cards) render correctly. New utilities like `bg-surface-raised` should be available.
  </verify>
  <done>
tailwind.config.ts contains new semantic utilities (surface.*, content.*, accent.*, status.*, border.*), updated gradient backgroundImage using semantic tokens, and all legacy utilities preserved. Build succeeds and existing styles work.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run build` succeeds without errors
2. Dev server shows identical rendering to before changes
3. globals.css has three clearly labeled sections: primitive, semantic, legacy
4. tailwind.config.ts exports semantic color utilities
5. Semantic tokens reference primitives (not hardcoded hex values)
</verification>

<success_criteria>
- Color tokens follow three-layer architecture (primitive -> semantic -> utility)
- No breaking changes to existing component styles
- Build passes with no CSS or TypeScript errors
- Foundation is ready for accessibility work in Plan 02
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md` following the summary template.
</output>
